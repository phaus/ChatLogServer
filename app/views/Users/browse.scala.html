@import org.joda.time._
@import views.addons._
@import helpers.ContentHelper
@import helpers.EntryHelper

@(user: openfire.User, entries: List[openfire.LogEntry], prev: Integer, next: Integer, page: Integer, order: String)

@main("ChatLogServer") {
    <li><a href="@routes.Rooms.index()">Home</a></li>
  	<li>Users</li>
  	<li>@user.username</li>
} {
<ul class="pager">
    <li class="previous">
        @if(prev != null){
        <a href="@routes.Users.browse(user.username)?page=@prev">&larr; prev</a>
        }
    </li>
    <li>
		<a href="@routes.Users.browse(user.username)?page=@page&order=@if(order.equals("asc")){asc}else{desc}">
		<span class="glyphicon @if(order.equals("asc")){glyphicon-chevron-up}else{glyphicon-chevron-down}"></span>
		</a>
    </li>
    <li class="next">
        @if(next != null){
        <a href="@routes.Users.browse(user.username)?page=@next">next &rarr;</a>
        }
    </li>
</ul>
<table class="table table-striped">
    @for(entry <- entries) {
    <tr class="entry" id="@entry.getEntryId()" name="@entry.getEntryId()">
		<td><a href="@routes.Rooms.browse(entry.roomId)">@entry.getRoomName()</a></td>
		<td>@if(entry.subject){<em>@Html(ContentHelper.prepare(entry.subject))</em>}@Html(ContentHelper.prepare(entry.body))</td>
        <td class="narrow"><a href="@routes.Rooms.show(entry.roomId, entry.getYear(), entry.getMonth(), entry.getDay())">@entry.getDate().format("dd.MM.yyyy HH:mm:ss")</a></td>
	</tr>
    }
</table>
<ul class="pager">
    <li class="previous">
        @if(prev != null){
        <a href="@routes.Users.browse(user.username)?page=@prev">&larr; prev</a>
        }
    </li>
    <li>
		<a href="@routes.Users.browse(user.username)?page=@page&order=@if(order.equals("asc")){asc}else{desc}">
		<span class="glyphicon @if(order.equals("asc")){glyphicon-chevron-up}else{glyphicon-chevron-down}"></span>
		</a>
    </li>
    <li class="next">
        @if(next != null){
        <a href="@routes.Users.browse(user.username)?page=@next">next &rarr;</a>
        }
    </li>
</ul>
}